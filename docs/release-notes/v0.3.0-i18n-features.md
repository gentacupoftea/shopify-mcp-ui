# v0.3.0 国際化機能リリースノート

Shopify-MCP-Server/Coneaプロジェクト v0.3.0では、包括的な国際化（i18n）対応を実装しました。これにより、複数言語のサポートとRTL言語への対応が可能になり、グローバル市場に向けたアプリケーションの提供が実現します。

## 新機能

### 多言語サポート

- **サポート言語:**
  - 日本語 (ja) - デフォルト言語
  - 英語 (en) - フォールバック言語
  - フランス語 (fr) - 新規追加
  - アラビア語 (ar) - RTL言語として新規追加

- **言語切替UI:**
  - ヘッダーバーに統合された言語切替メニュー
  - 3種類の表示バリアント（セレクト、メニュー、ボタン）
  - 各言語の国旗と現地語名表示

- **言語設定の永続化:**
  - ブラウザ設定からの自動言語検出
  - ユーザー選択言語のLocalStorage保存

### RTL言語サポート

![RTL言語サポート](../images/rtl-support-example.png)

- **自動方向性検出:**
  - アラビア語などのRTL言語選択時に自動的にレイアウト方向を変更
  - HTML `dir` 属性の動的制御

- **双方向レイアウト対応:**
  - 全UIコンポーネントのRTL対応
  - テキスト配置、マージン、パディングの方向性自動調整

- **RTLスタイルユーティリティ:**
  - 方向依存のスタイル適用を簡略化する専用関数群
  - Material UI コンポーネントの RTL 対応

### 地域化されたフォーマット

- **日付と時間:**
  - 各言語・地域に適した日付表示
  - 時間フォーマットのローカライズ
  - 相対時間表示のサポート（例: "3時間前"）

- **数値と通貨:**
  - 言語に応じた数値フォーマット
  - 複数通貨対応（JPY、USD、EUR等）
  - パーセント表示のローカライズ

- **単位変換:**
  - メートル法/ヤード・ポンド法の自動変換
  - 地域に応じた適切な単位表示

## 使用方法

### 翻訳の適用

コンポーネント内での翻訳キーの使用:

```tsx
import { useTranslation } from 'react-i18next';

const MyComponent = () => {
  const { t } = useTranslation();
  
  return (
    <div>
      <h1>{t('dashboard.title')}</h1>
      <p>{t('dashboard.welcome', { name: user.name })}</p>
      <button>{t('common.save')}</button>
    </div>
  );
};
```

### 言語切替コンポーネントの利用

ヘッダーやセッティングページでの言語切替UI:

```tsx
import { LanguageSwitcher } from '../components/common';

// セレクトフォーム
<LanguageSwitcher variant="select" />

// ドロップダウンメニュー
<LanguageSwitcher variant="menu" />

// ボタングループ
<LanguageSwitcher variant="button" />
```

### フォーマット関数の活用

地域化されたフォーマットの適用:

```tsx
import { 
  i18nFormatDate, 
  i18nFormatCurrency, 
  i18nFormatNumber,
  formatWithUnit
} from '../utils';

const FormattedDisplay = ({ data }) => (
  <div>
    <p>日付: {i18nFormatDate(data.date)}</p>
    <p>価格: {i18nFormatCurrency(data.price, 'JPY')}</p>
    <p>数量: {i18nFormatNumber(data.quantity)}</p>
    <p>サイズ: {formatWithUnit(data.size, 'metric', 'length')}</p>
  </div>
);
```

## 設計の特徴

### 階層化された翻訳キー構造

翻訳は論理的なセクションで階層化されています:

```
common.save = "保存"
common.cancel = "キャンセル"
dashboard.title = "ダッシュボード"
dashboard.welcome = "ようこそ、{{name}}さん"
```

### Intl APIの活用

ECMAScript Internationalization API (Intl) を活用して各国語に対応:

```typescript
// 日付フォーマット
const dateFormatter = new Intl.DateTimeFormat(i18n.language, options);

// 数値フォーマット
const numberFormatter = new Intl.NumberFormat(i18n.language, options);
```

### アクセシビリティへの配慮

- ARIA属性の適切な設定
- キーボードナビゲーション対応
- スクリーンリーダーの読み上げ最適化

## 今後の展開

v0.3.0では基本的な国際化機能を提供しますが、将来のリリースでは以下の改善を予定しています:

1. **v0.3.1 (6月中旬予定):**
   - 翻訳リソースの遅延ロード完全実装
   - 翻訳キーのバリデーションメカニズム
   - RTLレイアウトテストの強化

2. **v0.4.0 (7月中旬予定):**
   - 追加言語のサポート（中国語、スペイン語、ドイツ語など）
   - 翻訳管理ツールとの連携
   - 自動翻訳APIの統合検討

詳細な改善計画については `docs/i18n-improvement-plan.md` を参照してください。

## 技術仕様

- i18next/react-i18next: v23.2.11
- i18next-browser-languagedetector: v8.1.0
- ECMAScript Intl API
- TypeScript による型安全な実装

## 貢献者

- フロントエンドチーム
- UXチーム
- QAチーム
- 翻訳協力: 国際化タスクフォース

---

これらの国際化機能により、Shopify-MCP-Server/Coneaプロジェクトは多様なユーザーベースに対応し、グローバル市場での展開を容易にします。